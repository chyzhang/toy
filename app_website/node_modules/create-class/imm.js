var I = require('immutable');

var state = I.fromJS({
  spaces: {
    'blah': {
      draft: {
        ContentType: {
        },
        Entry: {
        },
        Asset: {
        }
      },
      published: {
        ContentType: {
        },
        Entry: {
        },
        Asset: {
        }
      },
    },
  },
});

var entries, ctypes, assets;
(function onUpdate (state) {
  var drafts = state.cursor(['spaces', 'blah', 'draft'], onUpdate);
  var draftContentTypes = drafts.cursor(['ContentType'], onUpdate);

  if (!draftContentTypes.length) {
    draftContentTypes.set('4b6w63x', { sys: 'lol' }, function (i) { return i; });
  } else {
    console.log(drafts.toJSON());
  }
})(state);
